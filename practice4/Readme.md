# 負載均衡器（Load Balancer）實作：最少負載（Least Load）策略
本專案展示了如何使用Python實現一個基於最少負載（Least Load）策略的簡單負載均衡器。

## 功能描述
負責接收來自客戶端的HTTP請求。
根據每個後端伺服器的當前負載，選擇最少負載的伺服器來處理請求。
增加選擇的後端伺服器的負載。
實作詳情
後端伺服器配置
在BACKEND_SERVERS字典中，定義了三個後端伺服器的地址和端口，以及它們的初始負載。
```
BACKEND_SERVERS = {
    ('localhost', 8000): 0,
    ('localhost', 8001): 0,
    ('localhost', 8002): 0,
    # 你可以添加更多的後端伺服器
}
```
負載均衡器邏輯
increase_load(server): 增加指定伺服器的負載。
decrease_load(server): 減少指定伺服器的負載。
least_load_server(): 選擇最少負載的伺服器。
在LoadBalancerHandler類中：

do_GET(): 處理來自客戶端的GET請求，並將其轉發到最少負載的後端伺服器。
log_message(): 覆寫以禁止請求日誌輸出。
## 使用方法
### 啟動FASTAPI伺服器（假設在8000、8001和8002端口）：
```
uvicorn webserver:app --port 8000
uvicorn webserver:app --port 8001
uvicorn webserver:app --port 8002
```
### 執行load_balancer.py以啟動負載均衡器。

```
python load_balancer.py
```
訪問http://localhost:9000，然後查看請求轉發到的後端伺服器地址和端口。

注意事項
本負載均衡器只是一個簡單的實現，並不包含實際的請求處理邏輯。
在實際應用中，可能需要考慮更多的因素，如伺服器的健康狀態、數據同步等。

# 議題
## 負載均衡器：結合最少負載與輪巡策略
在設計負載均衡器時，不同的策略可以根據實際需求和情境來選擇。其中，"最少負載"和"輪巡"是兩種常見且有效的策略。在某些情況下，這兩種策略可以結合使用，以充分利用資源並提高效率。

## 最少負載策略
"最少負載"策略的核心思想是選擇當前負載最低的伺服器來處理新的請求。這種策略可以確保資源被均衡地分配，並且能夠有效地避免某些伺服器負載過高，從而影響系統整體性能。

## 輪巡策略
"輪巡"策略則是按照順序依次選擇伺服器來處理請求，當到達列表末尾時，再從頭開始。這種策略簡單且公平，但可能會因為某些伺服器的負載過高而導致效能不佳。

## 結合策略：最少負載退化為輪巡
在實際應用中，當所有後端伺服器的負載相同時，"最少負載"策略會退化為"輪巡"策略。這是一個非常巧妙的設計，因為當系統負載平均時，"輪巡"策略能夠保證資源被均勻使用。

例如，在我們先前提供的Python負載均衡器程式中，當所有後端伺服器的負載相同時，我們會選擇第一個最少負載的伺服器來處理請求，然後增加該伺服器的負載。這樣，負載均衡器在確保資源均衡分配的同時，還能有效地利用所有後端伺服器。

## 總結
結合"最少負載"和"輪巡"策略是一個實用且有效的方法，可以在資源負載不均或者負載相同的情況下，實現更高效的負載均衡。這種結合策略不僅可以提高系統的性能，還可以增加系統的彈性和穩定性。

在實際應用中，根據具體的需求和情境，我們可以靈活地調整和組合不同的負載均衡策略，以達到最佳的效果。






